<view class="help-container">
  <!-- é¡¶éƒ¨æœç´¢æ  -->
  <view class="search-bar">
    <view class="search-icon">
      <text>ğŸ”</text>
    </view>
    <input class="search-input" 
           placeholder="æœç´¢" 
           value="{{keyword}}"
           bindinput="onKeywordInput"
           bindconfirm="onSearchConfirm"/>
    <view class="search-clear" wx:if="{{keyword.length > 0}}" bindtap="clearKeyword">
      <text>Ã—</text>
    </view>
  </view>

  <!-- åˆ†ç±»æ ‡ç­¾ -->
  <view class="category-tabs">
    <view wx:for="{{categories}}" 
          wx:key="categoryId"
          class="category-tab {{activeCategory && activeCategory.categoryId === item.categoryId ? 'active' : ''}}"
          data-category="{{item}}"
          bindtap="handleCategoryTap">
      {{item.categoryName}}
    </view>
  </view>

  <!-- å¸–å­åˆ—è¡¨ -->
  <view class="posts-container">
    <block wx:for="{{postList}}" wx:key="postId">
      <view class="post-card-container">
        <view class="post-card">
          <view class="post-header">
            <image class="post-avatar" src="{{item.avatarUrl || '/image/user_avatar.png'}}" mode="aspectFill"></image>
            <view class="post-user">
              <view class="post-row">
                <text class="post-name">{{item.author}}</text>
                <text class="post-tag">{{item.category.categoryName}}</text>
              </view>
              <text class="post-meta">{{item.createdAt}}</text>
            </view>
          </view>
          <text class="post-text">{{item.content}}</text>
          
          <!-- ä¹å®«æ ¼å›¾ç‰‡å±•ç¤º -->
          <view wx:if="{{item.images && item.images.length > 0}}" class="post-images-grid">
            <!-- å•å¼ å›¾ç‰‡ -->
            <block wx:if="{{item.images.length === 1}}">
              <image class="post-image-single" src="{{item.images[0]}}" mode="widthFix"></image>
            </block>
            
            <!-- å¤šå¼ å›¾ç‰‡ (2-9å¼ ) -->
            <block wx:elif="{{item.images.length > 1}}">
              <!-- 2å¼ å›¾ç‰‡ -->
              <view wx:if="{{item.images.length === 2}}" class="images-col-2">
                <image wx:for="{{item.images}}" wx:key="index" class="grid-image" src="{{item}}" mode="aspectFill"></image>
              </view>
              
              <!-- 4å¼ å›¾ç‰‡ -->
              <view wx:elif="{{item.images.length === 4}}" class="images-col-2">
                <image wx:for="{{item.images}}" wx:key="index" class="grid-image" src="{{item}}" mode="aspectFill"></image>
              </view>
              
              <!-- 3,5,6,7,8,9å¼ å›¾ç‰‡ -->
              <view wx:else class="images-col-3">
                <image wx:for="{{item.images}}" wx:key="index" wx:if="{{index < 9}}" class="grid-image" src="{{item}}" mode="aspectFill"></image>
              </view>
            </block>
          </view>

          <view class="post-footer">
            <view class="stat-block">
              <text class="stat-text">ğŸ‘ {{item.likeCount}}</text>
            </view>
            <view class="stat-block">
              <text class="stat-text">ğŸ’¬ {{item.commentCount}}</text>
            </view>
            <view class="stat-block">
              <text class="stat-text">ğŸ‘€ {{item.viewCount}}</text>
            </view>
          </view>
        </view>
      </view>
    </block>

    <view class="load-tip">
      <text wx:if="{{loading}}">åŠ è½½ä¸­...</text>
      <text wx:elif="{{hasMore}}">ä¸Šæ‹‰åŠ è½½æ›´å¤š</text>
      <text wx:else>æ²¡æœ‰æ›´å¤šå†…å®¹äº†</text>
    </view>
  </view>
</view>